<main class="offer-container">
  <article class="content">
    <div class="select-customer">
      <core-ui-large-button
        *ngIf="(selectedCustomer$ | async) === null"
        [isLoading]="isLoadingCustomer"
        [buttonType]="'dashed'"
        [title]="'Add Customer'"
        [subtitle]="'Click to select or add customer'"
        [svgIcon]="'contact'"
        (click)="onSelectCustomer()"
      ></core-ui-large-button>
      <tsm-ui-customer-info
        *ngIf="selectedCustomer$ | async"
        [customer]="selectedCustomer$ | async"
        (editedCustomer)="onChangeCustomer()"
      ></tsm-ui-customer-info>
    </div>
    <div class="select-tireset">
      <core-ui-large-button
        [isLoading]="isLoadingTireSet"
        [buttonType]="'dashed'"
        [title]="'Add Tireset'"
        [subtitle]="'Click to select or add tirest'"
        [svgIcon]="'tire'"
        (click)="onSelectTireSet()"
      ></core-ui-large-button>
      <ng-container
        *ngFor="
          let selectedTireSetWithPrices of selectedTireSetsWithPrices$ | async
        "
      >
        <tsm-ui-tire-set-info-ui
          class="full-width"
          [selectOptionVisible]="false"
          [editEnabled]="false"
          [deleteEnabled]="true"
          [tireSet]="selectedTireSetWithPrices.tireSet"
          (deleteTireSet)="onRemoveTireSet($event)"
        ></tsm-ui-tire-set-info-ui>
      </ng-container>
    </div>
    <mat-card>
      <mat-card-content>
        <div class="select-duration ui-section w-700">
          <mat-calendar
            #startDateCalendar
            [selected]="startDate$ | async"
            (selectedChange)="onStartDateChanged($event)"
          ></mat-calendar>
          <mat-calendar
            #endDateCalendar
            [selected]="endDate$ | async"
            [startAt]="endDate$ | async"
            (selectedChange)="onEndDateChanged($event)"
          ></mat-calendar>
        </div>
      </mat-card-content>
    </mat-card>
  </article>
  <aside class="sidebar">
    <div class="sidebar-section">
      <div class="ui-section-small">
        <tsm-ui-offer-calculation-ui
          [selectedTireSetsWithPrices]="selectedTireSetsWithPrices$ | async"
          [startDate]="startDate$ | async"
          [endDate]="endDate$ | async"
          [offerTotalPrice]="totalTireSetPrice$ | async"
        ></tsm-ui-offer-calculation-ui>
        <button
          mat-flat-button
          color="primary"
          class="full-width m-t-50px"
          (click)="onPlaceOrder()"
        >
          Place order
        </button>
      </div>
    </div>
  </aside>
</main>
<core-notifications-observer></core-notifications-observer>
